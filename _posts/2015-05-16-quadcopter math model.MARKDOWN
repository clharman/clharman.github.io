---
layout: post
title:  "Math Model of a Quadcopter"
date:   2015-05-16 00:00:00
categories: 
---

Before a device can be controlled, you must have some idea of what it is.  This sounds simple and, for the most part, it is.   A complex system can be approximated as multiple, simple systems and reduced to (relatively) easy math equations.

In the case of the quadcopter I worked this problem using the simplest concepts possible, many of which can be found on the Wikipedia page for Kinematics.

I started with the coordinate system.  Figure 1 shows the body-mounted coordinate system with the basic shape of the quadcopter overlaid.  Because they are body-mounted, the axes rotate and translate along with the quadcopter.  For example, when the quadcopter is upside down, the z-axis points up. 

Figure 1: The z-axis points down, the x-axis points forward, and the y-axis points right.  “Arms” of the quadcopter are labeled 1-4.
![alt text](/quadaxes.png)



The body mounted coordinates are defined in Equation 1.  A set of inertial coordinates (coordinates that do not change orientation or position with the body) is defined by Equation 2.  Equation 3 shows the body-mounted angles, where rotation about x is roll, y is pitch, and z is yaw, according to the right-hand rule.

![alt text](/quadeq1.png)

Then mass of the entire quadcopter is defined as m and Newton’s 2nd law forms Equation 4.  Equation 5 describes the forces acting on the body and contains several simplifications.  First, aerodynamic effects are neglected since speeds are small.  Second, each F term represents the thrust produced by its corresponding motor and is assumed to act entirely in the negative z-direction.  Finally, R is the third column of the 3-dimensional rotational matrix, since the x- and y- components of the thrusts are zero (so the force is treated as a scalar).

![alt text](/quadeq2.png)

The rotation of the body is described by Equation 8, the inertial matrix by Equation 9, and the torque matrix by Equation 10, where r is the distance from the center of the quadcopter to a line drawn between adjacent motors and the third row represents the torques generated by all motors.

![alt text](/quadeq3.png)

The force and torque depend on the speed of rotation of the propellers, shown in Equations 11 and 12.  Inertia of the propellers and motors was ignored, and the constants are related to the interaction of the propellers with the air and will be determined experimentally.  

![alt text](/quadeq4.png)

The speed of rotation can be modeled but I will do that at a later time.  The next step from here is to simulate these equations using software to make sure that they behave as expected.